!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t(require,exports,module):e.Vex=t()}(this,function(e,t,n){"use strict";return function(){var o;o=function(e){var t,n;return t=!1,e(function(){var o;return o=(document.body||document.documentElement).style,t=void 0!==o.animation||void 0!==o.WebkitAnimation||void 0!==o.MozAnimation||void 0!==o.MsAnimation||void 0!==o.OAnimation,e(window).bind("keyup.vex",function(e){return 27===e.keyCode?n.closeByEscape():void 0})}),n={globalID:1,animationEndEvent:"animationend webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend",baseClassNames:{vex:"vex",content:"vex-content",overlay:"vex-overlay",close:"vex-close",closing:"vex-closing",open:"vex-open"},defaultOptions:{content:"",showCloseButton:!0,escapeButtonCloses:!0,overlayClosesOnClick:!0,appendLocation:"body",className:"",css:{},overlayClassName:"",overlayCSS:{},contentClassName:"",contentCSS:{},closeClassName:"",closeCSS:{}},open:function(t){return t=e.extend({},n.defaultOptions,t),t.id=n.globalID,n.globalID+=1,t.$vex=e("<div>").addClass(n.baseClassNames.vex).addClass(t.className).css(t.css).data({vex:t}),t.$vexOverlay=e("<div>").addClass(n.baseClassNames.overlay).addClass(t.overlayClassName).css(t.overlayCSS).data({vex:t}),t.overlayClosesOnClick&&t.$vexOverlay.bind("click.vex",function(t){return t.target===this?n.close(e(this).data().vex.id):void 0}),t.$vex.append(t.$vexOverlay),t.$vexContent=e("<div>").addClass(n.baseClassNames.content).addClass(t.contentClassName).css(t.contentCSS).append(t.content).data({vex:t}),t.$vex.append(t.$vexContent),t.showCloseButton&&(t.$closeButton=e("<div>").addClass(n.baseClassNames.close).addClass(t.closeClassName).css(t.closeCSS).data({vex:t}).bind("click.vex",function(){return n.close(e(this).data().vex.id)}),t.$vexContent.append(t.$closeButton)),e(t.appendLocation).append(t.$vex),n.setupBodyClassName(t.$vex),t.afterOpen&&t.afterOpen(t.$vexContent,t),setTimeout(function(){return t.$vexContent.trigger("vexOpen",t)},0),t.$vexContent},getSelectorFromBaseClass:function(e){return"."+e.split(" ").join(".")},getAllVexes:function(){return e("."+n.baseClassNames.vex+':not(".'+n.baseClassNames.closing+'") '+n.getSelectorFromBaseClass(n.baseClassNames.content))},getVexByID:function(t){return n.getAllVexes().filter(function(){return e(this).data().vex.id===t})},close:function(e){var t;if(!e){if(t=n.getAllVexes().last(),!t.length)return!1;e=t.data().vex.id}return n.closeByID(e)},closeAll:function(){var t;return t=n.getAllVexes().map(function(){return e(this).data().vex.id}).toArray(),(null!=t?t.length:void 0)?(e.each(t.reverse(),function(e,t){return n.closeByID(t)}),!0):!1},closeByID:function(o){var a,s,i,l,r;return s=n.getVexByID(o),s.length?(a=s.data().vex.$vex,r=e.extend({},s.data().vex),i=function(){return r.beforeClose?r.beforeClose(s,r):void 0},l=function(){return s.trigger("vexClose",r),a.remove(),e("body").trigger("vexAfterClose",r),r.afterClose?r.afterClose(s,r):void 0},t?i()!==!1&&a.unbind(n.animationEndEvent).bind(n.animationEndEvent,function(){return l()}).addClass(n.baseClassNames.closing):i()!==!1&&l(),!0):void 0},closeByEscape:function(){var t,o,a;return a=n.getAllVexes().map(function(){return e(this).data().vex.id}).toArray(),(null!=a?a.length:void 0)?(o=Math.max.apply(Math,a),t=n.getVexByID(o),t.data().vex.escapeButtonCloses!==!0?!1:n.closeByID(o)):!1},setupBodyClassName:function(t){return e("body").bind("vexOpen.vex",function(){return e("body").addClass(n.baseClassNames.open)}).bind("vexAfterClose.vex",function(){return n.getAllVexes().length?void 0:e("body").removeClass(n.baseClassNames.open)})},hideLoading:function(){return e(".vex-loading-spinner").remove()},showLoading:function(){return n.hideLoading(),e("body").append('<div class="vex-loading-spinner '+n.defaultOptions.className+'"></div>')}}},"function"==typeof define&&define.amd?define(["jquery"],o):"object"==typeof t?n.exports=o(e("jquery")):window.vex=o(jQuery)}.call(void 0),function(){var o;o=function(e,t){var n,o;return null==t?e.error("Vex is required to use vex.dialog"):(n=function(t){var n;return n={},e.each(t.serializeArray(),function(){return n[this.name]?(n[this.name].push||(n[this.name]=[n[this.name]]),n[this.name].push(this.value||"")):n[this.name]=this.value||""}),n},o={},o.buttons={YES:{text:"OK",type:"submit",className:"vex-dialog-button-primary"},NO:{text:"Cancel",type:"button",className:"vex-dialog-button-secondary",click:function(e,n){return e.data().vex.value=!1,t.close(e.data().vex.id)}}},o.defaultOptions={callback:function(e){},afterOpen:function(){},message:"Message",input:'<input name="vex" type="hidden" value="_vex-empty-value" />',value:!1,buttons:[o.buttons.YES,o.buttons.NO],showCloseButton:!1,onSubmit:function(a){var s,i;return s=e(this),i=s.parent(),a.preventDefault(),a.stopPropagation(),i.data().vex.value=o.getFormValueOnSubmit(n(s)),t.close(i.data().vex.id)},focusFirstInput:!0},o.defaultAlertOptions={message:"Alert",buttons:[o.buttons.YES]},o.defaultConfirmOptions={message:"Confirm"},o.open=function(n){var a,s;return n=e.extend({},t.defaultOptions,o.defaultOptions,n),n.content=o.buildDialogForm(n),s=n.beforeClose,n.beforeClose=function(e,t){return n.callback(t.value),"function"==typeof s?s(e,t):void 0},a=t.open(n),n.focusFirstInput&&a.find('button[type="submit"], button[type="button"], input[type="submit"], input[type="button"], textarea, input[type="date"], input[type="datetime"], input[type="datetime-local"], input[type="email"], input[type="month"], input[type="number"], input[type="password"], input[type="search"], input[type="tel"], input[type="text"], input[type="time"], input[type="url"], input[type="week"]').first().focus(),a},o.alert=function(t){return"string"==typeof t&&(t={message:t}),t=e.extend({},o.defaultAlertOptions,t),o.open(t)},o.confirm=function(t){return"string"==typeof t?e.error("dialog.confirm(options) requires options.callback."):(t=e.extend({},o.defaultConfirmOptions,t),o.open(t))},o.prompt=function(t){var n;return"string"==typeof t?e.error("dialog.prompt(options) requires options.callback."):(n={message:'<label for="vex">'+(t.label||"Prompt:")+"</label>",input:'<input name="vex" type="text" class="vex-dialog-prompt-input" placeholder="'+(t.placeholder||"")+'"  value="'+(t.value||"")+'" />'},t=e.extend({},n,t),o.open(t))},o.buildDialogForm=function(t){var n,a,s;return n=e('<form class="vex-dialog-form" />'),s=e('<div class="vex-dialog-message" />'),a=e('<div class="vex-dialog-input" />'),n.append(s.append(t.message)).append(a.append(t.input)).append(o.buttonsToDOM(t.buttons)).bind("submit.vex",t.onSubmit),n},o.getFormValueOnSubmit=function(e){return e.vex||""===e.vex?"_vex-empty-value"===e.vex?!0:e.vex:e},o.buttonsToDOM=function(n){var o;return o=e('<div class="vex-dialog-buttons" />'),e.each(n,function(a,s){var i;return i=e('<button type="'+s.type+'"></button>').text(s.text).addClass(s.className+" vex-dialog-button "+(0===a?"vex-first ":"")+(a===n.length-1?"vex-last ":"")).bind("click.vex",function(n){return s.click?s.click(e(this).parents(t.getSelectorFromBaseClass(t.baseClassNames.content)),n):void 0}),i.appendTo(o)}),o},o)},"function"==typeof define&&define.amd?define(["jquery","vex"],o):"object"==typeof t?n.exports=o(e("jquery"),e("./vex.js")):window.vex.dialog=o(window.jQuery,window.vex)}.call(void 0),Vex});