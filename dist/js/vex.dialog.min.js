!function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e(require,exports,module):t.vex.dialog=e()}(this,function(t,e,n){"use strict";if("undefined"==typeof vex)throw new Error("You must include Vex to use vex.dialog");var o=function(t){var e={};return $.each(t.serializeArray(),function(){return e[this.name]?(e[this.name]=e[this.name].push?e[this.name]:[e[this.name]],e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e},i={};return i.buttons={YES:{text:"OK",type:"submit",className:"vex-dialog-button-primary"},NO:{text:"Cancel",type:"button",className:"vex-dialog-button-secondary",click:function(t,e){return t.data().vex.value=!1,vex.close(t.data().vex.id)}}},i.defaultOptions={callback:function(t){},afterOpen:function(){},message:"Message",input:'<input name="vex" type="hidden" value="_vex-empty-value" />',value:!1,buttons:[i.buttons.YES,i.buttons.NO],showCloseButton:!1,onSubmit:function(t){var e=$(this),n=e.parent();return t.preventDefault(),t.stopPropagation(),n.data().vex.value=i.getFormValueOnSubmit(o(e)),vex.close(n.data().vex.id)},focusFirstInput:!0},i.defaultAlertOptions={message:"Alert",buttons:[i.buttons.YES]},i.defaultConfirmOptions={message:"Confirm"},i.open=function(t){t=$.extend({},vex.defaultOptions,i.defaultOptions,t),t.content=i.buildDialogForm(t);var e=t.beforeClose;t.beforeClose=function(n,o){return t.callback(o.value),"function"==typeof e?e(n,o):void 0};var n=vex.open(t);return t.focusFirstInput&&n.find('button[type="submit"], button[type="button"], input[type="submit"], input[type="button"], textarea, input[type="date"], input[type="datetime"], input[type="datetime-local"], input[type="email"], input[type="month"], input[type="number"], input[type="password"], input[type="search"], input[type="tel"], input[type="text"], input[type="time"], input[type="url"], input[type="week"]').first().focus(),n},i.alert=function(t){return"string"==typeof t&&(t={message:t}),t=$.extend({},i.defaultAlertOptions,t),i.open(t)},i.confirm=function(t){return"string"==typeof t?$.error("dialog.confirm(options) requires options.callback."):(t=$.extend({},i.defaultConfirmOptions,t),i.open(t))},i.prompt=function(t){if("string"==typeof t)return $.error("dialog.prompt(options) requires options.callback.");var e={message:'<label for="vex">'+(t.label||"Prompt:")+"</label>",input:'<input name="vex" type="text" class="vex-dialog-prompt-input" placeholder="'+(t.placeholder||"")+'"  value="'+(t.value||"")+'" />'};return t=$.extend({},e,t),i.open(t)},i.buildDialogForm=function(t){var e=$('<form class="vex-dialog-form" />'),n=$('<div class="vex-dialog-message" />'),o=$('<div class="vex-dialog-input" />');return e.append(n.append(t.message)).append(o.append(t.input)).append(i.buttonsToDOM(t.buttons)).bind("submit.vex",t.onSubmit),e},i.getFormValueOnSubmit=function(t){return t.vex||""===t.vex?"_vex-empty-value"===t.vex?!0:t.vex:t},i.buttonsToDOM=function(t){var e=$('<div class="vex-dialog-buttons" />');return $.each(t,function(n,o){var i=$('<button type="'+o.type+'"></button>').text(o.text).addClass(o.className+" vex-dialog-button "+(0===n?"vex-first ":"")+(n===t.length-1?"vex-last ":"")).bind("click.vex",function(t){return o.click?o.click($(this).parents(vex.getSelectorFromBaseClass(vex.baseClassNames.content)),t):void 0});return i.appendTo(e)}),e},i});