!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t(require,exports,module):e.Vex=t()}(this,function(e,t,n){"use strict";function o(e,t){var n=this;if("undefined"==typeof t)throw new Error("You must include Vex to use vex.dialog");$formToObject=function(t){var o={};return e.each(t.serializeArray(),function(){return o[n.name]?(o[n.name]=o[n.name].push?o[n.name]:[o[n.name]],o[n.name].push(n.value||"")):o[n.name]=n.value||""}),o};var o={};return o.buttons={YES:{text:"OK",type:"submit",className:"vex-dialog-button-primary"},NO:{text:"Cancel",type:"button",className:"vex-dialog-button-secondary",click:function(e,n){return e.data().vex.value=!1,t.close(e.data().vex.id)}}},o.defaultOptions={callback:function(e){},afterOpen:function(){},message:"Message",input:'<input name="vex" type="hidden" value="_vex-empty-value" />',value:!1,buttons:[o.buttons.YES,o.buttons.NO],showCloseButton:!1,onSubmit:function(a){var u=e(n),i=u.parent();return a.preventDefault(),a.stopPropagation(),i.data().vex.value=o.getFormValueOnSubmit($formToObject(u)),t.close(i.data().vex.id)},focusFirstInput:!0},o.defaultAlertOptions={message:"Alert",buttons:[o.buttons.YES]},o.defaultConfirmOptions={message:"Confirm"},o.open=function(n){var a,u;return n=e.extend({},t.defaultOptions,o.defaultOptions,n),n.content=o.buildDialogForm(n),u=n.beforeClose,n.beforeClose=function(e,t){return n.callback(t.value),"function"==typeof u?u(e,t):void 0},a=t.open(n),n.focusFirstInput&&a.find('button[type="submit"], button[type="button"], input[type="submit"], input[type="button"], textarea, input[type="date"], input[type="datetime"], input[type="datetime-local"], input[type="email"], input[type="month"], input[type="number"], input[type="password"], input[type="search"], input[type="tel"], input[type="text"], input[type="time"], input[type="url"], input[type="week"]').first().focus(),a},o.alert=function(t){return"string"==typeof t&&(t={message:t}),t=e.extend({},o.defaultAlertOptions,t),o.open(t)},o.confirm=function(t){return"string"==typeof t?e.error("dialog.confirm(options) requires options.callback."):(t=e.extend({},o.defaultConfirmOptions,t),o.open(t))},o.prompt=function(t){var n;return"string"==typeof t?e.error("dialog.prompt(options) requires options.callback."):(n={message:'<label for="vex">'+(t.label||"Prompt:")+"</label>",input:'<input name="vex" type="text" class="vex-dialog-prompt-input" placeholder="'+(t.placeholder||"")+'"  value="'+(t.value||"")+'" />'},t=e.extend({},n,t),o.open(t))},o.buildDialogForm=function(t){var n,a,u;return n=e('<form class="vex-dialog-form" />'),u=e('<div class="vex-dialog-message" />'),a=e('<div class="vex-dialog-input" />'),n.append(u.append(t.message)).append(a.append(t.input)).append(o.buttonsToDOM(t.buttons)).bind("submit.vex",t.onSubmit),n},o.getFormValueOnSubmit=function(e){return formData.vex||""===formData.vex?"_vex-empty-value"===formData.vex?!0:formData.vex:formData},o.buttonsToDOM=function(o){var a;return a=e('<div class="vex-dialog-buttons" />'),e.each(o,function(u,i){var r;return r=e('<button type="'+i.type+'"></button>').text(i.text).addClass(i.className+" vex-dialog-button "+(0===u?"vex-first ":"")+(u===o.length-1?"vex-last ":"")).bind("click.vex",function(o){return i.click?i.click(e(n).parents(t.getSelectorFromBaseClass(t.baseClassNames.content)),o):void 0}),r.appendTo(a)}),a},o}return"function"==typeof define&&define.amd?define(["jquery","vex"],o):"object"==typeof t?n.exports=o(e("jquery"),e("./vex.js")):window.vex.dialog=o(window.jQuery,window.vex),Vex});