!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t(require,exports,module):e.vex.dialog=t()}(this,function(e,t,n){"use strict";if("undefined"==typeof vex)throw new Error("You must include Vex to use vex.dialog");var o=function(e){var t={};return $.each(e.serializeArray(),function(){return t[(void 0).name]?(t[(void 0).name]=t[(void 0).name].push?t[(void 0).name]:[t[(void 0).name]],t[(void 0).name].push((void 0).value||"")):t[(void 0).name]=(void 0).value||""}),t},a={};return a.buttons={YES:{text:"OK",type:"submit",className:"vex-dialog-button-primary"},NO:{text:"Cancel",type:"button",className:"vex-dialog-button-secondary",click:function(e,t){return e.data().vex.value=!1,vex.close(e.data().vex.id)}}},a.defaultOptions={callback:function(e){},afterOpen:function(){},message:"Message",input:'<input name="vex" type="hidden" value="_vex-empty-value" />',value:!1,buttons:[a.buttons.YES,a.buttons.NO],showCloseButton:!1,onSubmit:function(e){var t=$(void 0),n=t.parent();return e.preventDefault(),e.stopPropagation(),n.data().vex.value=a.getFormValueOnSubmit(o(t)),vex.close(n.data().vex.id)},focusFirstInput:!0},a.defaultAlertOptions={message:"Alert",buttons:[a.buttons.YES]},a.defaultConfirmOptions={message:"Confirm"},a.open=function(e){e=$.extend({},vex.defaultOptions,a.defaultOptions,e),e.content=a.buildDialogForm(e);var t=e.beforeClose;e.beforeClose=function(n,o){return e.callback(o.value),"function"==typeof t?t(n,o):void 0};var n=vex.open(e);return e.focusFirstInput&&n.find('button[type="submit"], button[type="button"], input[type="submit"], input[type="button"], textarea, input[type="date"], input[type="datetime"], input[type="datetime-local"], input[type="email"], input[type="month"], input[type="number"], input[type="password"], input[type="search"], input[type="tel"], input[type="text"], input[type="time"], input[type="url"], input[type="week"]').first().focus(),n},a.alert=function(e){return"string"==typeof e&&(e={message:e}),e=$.extend({},a.defaultAlertOptions,e),a.open(e)},a.confirm=function(e){return"string"==typeof e?$.error("dialog.confirm(options) requires options.callback."):(e=$.extend({},a.defaultConfirmOptions,e),a.open(e))},a.prompt=function(e){if("string"==typeof e)return $.error("dialog.prompt(options) requires options.callback.");var t={message:'<label for="vex">'+(e.label||"Prompt:")+"</label>",input:'<input name="vex" type="text" class="vex-dialog-prompt-input" placeholder="'+(e.placeholder||"")+'"  value="'+(e.value||"")+'" />'};return e=$.extend({},t,e),a.open(e)},a.buildDialogForm=function(e){var t=$('<form class="vex-dialog-form" />'),n=$('<div class="vex-dialog-message" />'),o=$('<div class="vex-dialog-input" />');return t.append(n.append(e.message)).append(o.append(e.input)).append(a.buttonsToDOM(e.buttons)).bind("submit.vex",e.onSubmit),t},a.getFormValueOnSubmit=function(e){return formData.vex||""===formData.vex?"_vex-empty-value"===formData.vex?!0:formData.vex:formData},a.buttonsToDOM=function(e){var t=$('<div class="vex-dialog-buttons" />');return $.each(e,function(n,o){var a=$('<button type="'+o.type+'"></button>').text(o.text).addClass(o.className+" vex-dialog-button "+(0===n?"vex-first ":"")+(n===e.length-1?"vex-last ":"")).bind("click.vex",function(e){return o.click?o.click($(void 0).parents(vex.getSelectorFromBaseClass(vex.baseClassNames.content)),e):void 0});return a.appendTo(t)}),t},a});